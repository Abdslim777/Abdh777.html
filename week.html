<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø±Ø§Ø¯Ø§Ø± Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ v13</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <style>
        :root { --bg: #05070a; --card: #12151c; --gold: #f0883e; --blue: #58a6ff; --green: #238636; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { margin: 0; padding: 0; background: var(--bg); color: #fff; font-family: system-ui; overflow-x: hidden; height: 100%; }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… - Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© */
        section { min-height: 100vh; width: 100vw; padding: 20px; display: flex; flex-direction: column; border-bottom: 1px solid #1f242c; }

        /* Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .dash-card { background: var(--card); border-radius: 20px; padding: 25px; text-align: center; border: 1px solid #1f242c; flex: 1; display: flex; flex-direction: column; justify-content: center; }
        .stat-circle { width: 150px; height: 150px; border: 4px solid var(--blue); border-radius: 50%; margin: 20px auto; display: flex; flex-direction: column; justify-content: center; box-shadow: 0 0 20px rgba(88, 166, 255, 0.2); }
        .stat-circle big { font-size: 1.8rem; font-weight: 800; }
        
        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ†ÙˆØ² */
        .treasure-list { flex: 1; overflow-y: auto; padding-top: 10px; }
        .wallet-item { background: var(--card); border-right: 5px solid var(--gold); padding: 15px; border-radius: 12px; margin-bottom: 12px; }

        /* Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
        .chat-area { flex: 1; overflow-y: auto; background: #000; border-radius: 15px; padding: 15px; margin-bottom: 15px; }
        .msg { margin-bottom: 10px; font-size: 0.95rem; line-height: 1.4; }
        .msg b { color: var(--blue); margin-left: 5px; }

        .input-group { display: flex; gap: 10px; background: var(--card); padding: 10px; border-radius: 12px; }
        input { flex: 1; background: transparent; border: none; color: white; outline: none; }
        .btn { background: var(--green); border: none; color: white; padding: 12px 20px; border-radius: 10px; font-weight: bold; cursor: pointer; }

        .hint { font-size: 0.8rem; color: #555; text-align: center; margin-top: 10px; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
    </style>
</head>
<body>

<section id="home">
    <div class="dash-card">
        <h2 style="margin:0">ğŸ“¡ Ø±Ø§Ø¯Ø§Ø± Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…ÙˆØ­Ø¯</h2>
        <div class="stat-circle">
            <small>Ø§Ù„Ù…Ø¤Ø´Ø± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</small>
            <big id="idx">0</big>
        </div>
        <div style="display:flex; justify-content: space-around; margin: 20px 0;">
            <div><small>Ø§Ù„Ù…Ù„Ù</small><br><b id="total">0</b></div>
            <div style="color:var(--gold)"><small>Ø§Ù„ÙƒÙ†ÙˆØ²</small><br><b id="foundCount">0</b></div>
        </div>
        <div id="status" style="color:var(--green); font-size:0.8rem; margin-bottom:10px;">Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø³Ø­Ø§Ø¨Ø© âœ…</div>
        <p class="hint">Ø§Ø³Ø­Ø¨ Ù„Ù„Ø£Ø¹Ù„Ù‰ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ÙƒÙ†ÙˆØ² ÙˆØ§Ù„Ø¯Ø±Ø¯Ø´Ø© ğŸ‘†</p>
    </div>
</section>

<section id="treasures">
    <h2 style="color:var(--gold)">ğŸ’ Ø§Ù„Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ù…ÙƒØªØ´ÙØ©</h2>
    <div class="treasure-list" id="foundList">
        </div>
</section>

<section id="community">
    <h2 style="color:var(--blue)">ğŸ’¬ Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„ØµÙŠØ§Ø¯ÙŠÙ†</h2>
    <div class="chat-area" id="msgs"></div>
    <div class="input-group">
        <input type="text" id="chatIn" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹...">
        <button class="btn" onclick="sendMsg()">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>
</section>

<script>
    // Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¬ØªÙ…Ø¹ÙŠØ© Ù…Ø³ØªÙ‚Ø±Ø©
    const config = { databaseURL: "https://community-radar-v13-default-rtdb.firebaseio.com/" };
    if (!firebase.apps.length) firebase.initializeApp(config);
    const db = firebase.database();

    let addresses = [];
    let curIdx = 0;
    const name = "Hunter-" + Math.floor(Math.random() * 999);
    const RPCs = ['https://eth.llamarpc.com', 'https://bsc-dataseed.binance.org', 'https://polygon-rpc.com'];

    // Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù…Ø¤Ø´Ø± (ÙŠØ¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¯Ø§Ø¦Ù…Ø§Ù‹)
    db.ref('global_idx').on('value', s => {
        curIdx = s.val() || 0;
        document.getElementById('idx').innerText = curIdx.toLocaleString();
        if(addresses.length > 0) startScan();
    });

    // Ø¬Ù„Ø¨ Ø§Ù„ÙƒÙ†ÙˆØ² Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© (Ù…Ø²Ø§Ù…Ù†Ø© ÙÙˆØ±ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„)
    db.ref('found').on('child_added', s => renderW(s.val()));

    // Ø¬Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
    db.ref('chat').on('child_added', s => renderM(s.val()));

    async function loadFile() {
        try {
            const r = await fetch('32.txt');
            const t = await r.text();
            addresses = t.split(/\s+/).filter(a => ethers.utils.isAddress(a.trim()));
            document.getElementById('total').innerText = addresses.length.toLocaleString();
        } catch(e) { console.error("Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"); }
    }

    async function startScan() {
        const BATCH = 25;
        // ÙØ­Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠ ØµØ§Ù…Øª
        if(curIdx < addresses.length) {
            const batch = addresses.slice(curIdx, curIdx + BATCH);
            await Promise.all(batch.map(async (a) => {
                const b = await check(a.trim());
                if(b) db.ref('found').push({ a, b, n: name, t: new Date().toLocaleTimeString() });
            }));
            curIdx += BATCH;
            db.ref('global_idx').set(curIdx);
        }
        setTimeout(startScan, 1000); // Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„ÙØ­Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
    }

    async function check(a) {
        try {
            const p = new ethers.providers.JsonRpcProvider(RPCs[Math.floor(Math.random()*RPCs.length)]);
            const b = await p.getBalance(a);
            return b.gt(0) ? ethers.utils.formatEther(b).substring(0,6) : null;
        } catch { return null; }
    }

    function sendMsg() {
        const i = document.getElementById('chatIn');
        if(i.value.trim()) {
            db.ref('chat').push({ n: name, m: i.value });
            i.value = "";
        }
    }

    function renderM(c) {
        const d = document.createElement('div');
        d.className = 'msg';
        d.innerHTML = `<b>${c.n}:</b> ${c.m}`;
        const b = document.getElementById('msgs');
        b.appendChild(d);
        b.scrollTop = b.scrollHeight;
    }

    function renderW(w) {
        const d = document.createElement('div');
        d.className = 'wallet-item';
        d.innerHTML = `<strong>ğŸ’° ${w.b} ETH/BNB</strong><br><small style="color:#888;word-break:break-all;">${w.a}</small><br><small style="color:var(--blue)">Ø¨ÙˆØ§Ø³Ø·Ø©: ${w.n}</small>`;
        document.getElementById('foundList').prepend(d);
        document.getElementById('foundCount').innerText = document.getElementById('foundList').childElementCount;
    }

    window.onload = loadFile;
</script>
</body>
</html>
